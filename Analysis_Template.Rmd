---
title: "Analysis Template"
author: "Kaydee Barker"
date: "`r Sys.Date()`"
output: 
  pdf_document: default #set as default knit option
    toc: yes
    
  word_document:
    toc: yes
	   
	html_document:
    toc: yes #table of contents
    number_sections: true #number the table of contents items
    toc_float: yes #floats at top corner as user scrolls
    code_folding: hide #hide until user clicks to show (or could do opposite, or none)
  
---



# Set up

## Global settings

Start with a clean slate and set default settings for code blocks. Some options include:

> eval = TRUE #run code in chunk (FALSE will not run)
echo = TRUE #display code in knit output (FALSE will hide)
include = TRUE #include chunk in knit output (FALSE will not include)
message = TRUE #display code messages in knit output (FALSE will hide)
warning = TRUE #display code warnings (FALSE will hide)
error = FALSE #stop rendor when error occurs (TRUE will continue and display error messages in knit output)

```{r setup, include=FALSE}

rm(list=ls()) #clear global environment/workspace
knitr::opts_chunk$set(echo = TRUE) #default display code in knit output (FALSE will hide)

getwd #see what your current working directory is

#If you need to change your working directory, adjust the following line
#setwd("C:/...folder") #set working directory

```

## Load libraries (and install if needed)

Load libraries that are commonly used for data analysis and visualization in our field.

```{r libraries, warning=FALSE, include=FALSE}

#Create groups of packages/libraries 

##1. For data reading and manipulation - could just do tidyverse and a few others, or make group of specific libraries for faster loading
datalib <- c("dplyr", "tidyr", "readr", "read_excel", "stringr", "tibble", "reshape2", "janitor") 

##2. For data visualization (note ggplot2 is in tidyverse)
vislib <- c("ggplot2", "ggthemes", "ggfortify", "ggrepel", "plotrix", "RColorBrewer", "Cairo")

##3. For calculation and stats functions, including ecology-specific libraries
statlib <- c("car", "MASS", "rcompanion", "zoo", "lme4", "MuMIn", "emmeans", "performance", "see", "corrplot", "BAT", "vegan")

#Install packages as needed - commented out, but remove # and adjust as needed
##as a group:
#lapply(c(datalib, vislib, statlib), install.packages, character.only = TRUE)

##or individually:
#install.packages("janitor") #install janitor to help clean up data

#Load libraries
lapply(c(datalib, vislib, statlib), library, character.only = TRUE)

```

## Define custom color palettes, labels, data orders, and settings for plots

```{r design, echo=FALSE}

#color palettes

#color palette example using RGB codes
colors <- c("#3DD978", "#995551", "#D9443D", "#518464")

#color palette example with named colors
colors2 <- c("khaki", "darkolivegreen", "darkred", "bisque")

#color palette with gradient
colors_ramp <- colorRampPalette(c("darkgreen", "azure","goldenrod"))(20)

#Custom ggplot configuration - make all backgrounds transparent, no gridlines
transparentbg <- theme(
  panel.background = element_rect(fill='transparent'),
  plot.background = element_rect(fill='transparent', color=NA),
  panel.grid.major = element_blank(),
  panel.grid.minor = element_blank(),
  legend.background = element_rect(fill='transparent'),
  legend.box.background = element_rect(fill='transparent'))

#labels for graphs

lbls_fg <- c("per_graminoid"="Graminoid", "per_forb"="Forb", "per_legume"="Legume", "per_woody"="Woody")

#order for data

#order sites by photosynthetic pathway dominance
order_sites_ps <- c("Cowichan", "Smith Prairie", "Spindletop", "Elliot Chapparal", "Val Mustair", "Bogong", "Cereep", "Las Chilcas", "Cedar Point Biological Station", "Shortgrass Steppe LTER", "Cedar Creek", "Ukulinga", "Chichaqua Bottoms", "Hall's Prairie", "Boulder South Campus", "Burrawan", "Ethabuka South Site")

#order columns
order_cols <- c("Site", "Site_ID", "SOM_C", "SOM_N", "SOM_CN", "POM_C", "POM_N", "POM_CN", "MAOM_C", "MAOM_N", "MAOM_CN", "per_POM", "per_MAOM", "fPOM_C", "fPOM_N", "fMAOM_C", "fMAOM_N", "MAT", "T_var", "MAP", "P_var", "sand", "silt", "clay", "soil_P", "soil_Ca", "soil_Mg", "per_C3", "per_C4", "per_CAMint", "per_unknown", "per_graminoid", "per_forb", "per_legume", "per_woody", "speciesr", "shannon", "simpson", "SLA", "SRL", "root_diam", "RMF", "myc", "root_depth", "leaf_CN", "root_C", "root_N", "root_CN", "lignin_conc", "per_crudef")




```



# Load data

Load in your data here by adjusting the code in this block. I've included some possible file types.

```{r load data, echo=FALSE}

#Load in your data

#Read in csvs
dataframe1 <- read_csv("dataframe.csv") #load csv into R from current working directory
dataframe2 <- read.csv("C:/Users/...pathway/dataframe.csv") #load csv into R from any path on your computer

#Read in excel file with xlsx extension - uses read_excel library
dataframe <- read_xlsx(
  "dataframe.xlsx", #excel file from current working directory
	sheet = "SheetName", #define tab/sheet to read  
	col_names = TRUE, #use header row for column names  
	col_types = NULL, #guess data types  
	na = "", #treat blank cells as NA  
	trim_ws = TRUE, #trim any whitespace/unused columns and rows  
	skip = 6, #skip 6 rows to get to pivot table data  
	n_max = Inf, #set maximum number of rows to include - infinity
	guess_max = min(1000, Inf), #how many rows to use to guess data types  
	progress = readxl_progress(), #display progress in reading in data  
	.name_repair = "unique" #makes sure all column names not empty or duplicated
)

```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
